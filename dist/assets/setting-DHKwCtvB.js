import{m as f}from"./manageBaseUrl-BqVoOfTC.js";import{g as p,c as l,u as P,e as c,b as v}from"./errorHelper-hiI84cHa.js";import{p as y,s as C}from"./SideBar-h2itk8z6.js";import{c as b,b as I,r as w}from"./helper-j1ULhG3T.js";import{h as x,p as B}from"./validator-CPshEXBE.js";import"./constant-DWVoamgU.js";f();const u=localStorage.getItem("token"),F=async()=>{const m=await p(u);C();const E=()=>{const{changePasswordForm:d,oldPasswordInput:n,newPasswordInput:e,confirmPasswordInput:t,changePasswordButton:r}=I();d.addEventListener("submit",async i=>{var h;i.preventDefault();const g=n.value.trim(),o=e.value.trim(),a=t.value.trim();if(!B(g,o,a)){c({message:"",success:!0}),r.disabled=!0,r.innerText="Changing...";try{const s=await v(u,o,g);s!=null&&s.success?c({success:!0,message:((h=s==null?void 0:s.message)==null?void 0:h.message)||"Password changed successfully"}):c({success:!1,message:(s==null?void 0:s.message)||"Error Changing Password"})}catch(s){w(cha),c({success:!1,message:s.message}),console.error("Error changing password:",s)}finally{w(n,e,t),r.disabled=!1,r.innerText="Change Password"}}})};(async()=>{var t;const{changeEmailForm:d,newEmailInput:n,changeEmailButton:e}=b();n.value=(t=m==null?void 0:m.message)==null?void 0:t.email,d.addEventListener("submit",async r=>{var o;r.preventDefault();const i=n.value.trim();if(l(""),!x(i)){e.disabled=!0,e.innerText="Changing...";try{const a=await P(u,i);a!=null&&a.success?l(((o=a==null?void 0:a.message)==null?void 0:o.message)||"Email changed successfully"):l((a==null?void 0:a.message)||"Email already exists")}catch(a){l(a.message),console.error("Error changing email:",a)}finally{e.disabled=!1,e.innerText="Change Email"}}})})(),E()};y(F);

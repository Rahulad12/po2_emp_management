import"./modulepreload-polyfill-B5Qt9EMX.js";import{g as f,d as P,f as l,u as p,h as v,e as c,j as y,r as w}from"./errorHelper-Cs5CMN5R.js";import{p as C,s as b}from"./SideBar-EuG1M4Qb.js";import{h as I,p as x}from"./validator-CcHa-naE.js";import"./constant-DWVoamgU.js";const u=localStorage.getItem("token"),F=async()=>{const m=await f(u);b();const E=()=>{const{changePasswordForm:d,oldPasswordInput:n,newPasswordInput:e,confirmPasswordInput:t,changePasswordButton:r}=v();d.addEventListener("submit",async i=>{var h;i.preventDefault();const g=n.value.trim(),o=e.value.trim(),a=t.value.trim();if(!x(g,o,a)){c({message:"",success:!0}),r.disabled=!0,r.innerText="Changing...";try{const s=await y(u,o,g);s!=null&&s.success?c({success:!0,message:((h=s==null?void 0:s.message)==null?void 0:h.message)||"Password changed successfully"}):c({success:!1,message:(s==null?void 0:s.message)||"Error Changing Password"})}catch(s){w(cha),c({success:!1,message:s.message}),console.error("Error changing password:",s)}finally{w(n,e,t),r.disabled=!1,r.innerText="Change Password"}}})};(async()=>{var t;const{changeEmailForm:d,newEmailInput:n,changeEmailButton:e}=P();n.value=(t=m==null?void 0:m.message)==null?void 0:t.email,d.addEventListener("submit",async r=>{var o;r.preventDefault();const i=n.value.trim();if(l(""),!I(i)){e.disabled=!0,e.innerText="Changing...";try{const a=await p(u,i);a!=null&&a.success?l(((o=a==null?void 0:a.message)==null?void 0:o.message)||"Email changed successfully"):l((a==null?void 0:a.message)||"Email already exists")}catch(a){l(a.message),console.error("Error changing email:",a)}finally{e.disabled=!1,e.innerText="Change Email"}}})})(),E()};C(F);
